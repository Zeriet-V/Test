# å¹»è§‰æ£€æµ‹æ–¹æ³•é›†åˆ

æœ¬ç›®å½•åŒ…å«å¤šç§å¹»è§‰æ£€æµ‹æ–¹æ³•çš„å®ç°ã€‚

## ğŸ“‚ æ–‡ä»¶å¤¹ç»“æ„

```
detectors/
â”œâ”€â”€ bartscore_methods/     # BARTScore ç›¸å…³æ–¹æ³•
â”œâ”€â”€ nli_methods/           # NLI-DeBERTa ç›¸å…³æ–¹æ³•
â”œâ”€â”€ split_dataset.py       # æ•°æ®é›†åˆ†å‰²å·¥å…·
â””â”€â”€ å…¶ä»–å·¥å…·å’Œæ–‡æ¡£
```

---

## ğŸ“ 1. BARTScore æ–¹æ³•

**è·¯å¾„**: `bartscore_methods/`

### æ ¸å¿ƒæ€æƒ³
ä½¿ç”¨é¢„è®­ç»ƒ BART æ¨¡å‹è®¡ç®—ç”Ÿæˆæ–‡æœ¬ç›¸å¯¹äºåŸæ–‡çš„å¯¹æ•°ä¼¼ç„¶ï¼Œåˆ†æ•°è¶Šä½è¡¨ç¤ºä¸€è‡´æ€§è¶Šå·®ã€‚

### å®ç°æ–‡ä»¶
- `bartscore_detector.py` - åŸç‰ˆæ£€æµ‹å™¨ â­ æ¨è
- `bartscore_detector_improved.py` - æ”¹è¿›ç‰ˆï¼ˆä»»åŠ¡ç‰¹å®šé˜ˆå€¼ï¼‰
- `bartscore_detector_adaptive.py` - è‡ªé€‚åº”ç‰ˆæœ¬
- `bartscore_threshold_optimizer.py` - é˜ˆå€¼ä¼˜åŒ–å™¨

### æ€§èƒ½ï¼ˆæµ‹è¯•é›†ï¼‰
- **F1åˆ†æ•°**: 66-68
- **å‡†ç¡®ç‡**: 54-57%
- **å¬å›ç‡**: 84-87%

### ä¼˜åŠ¿
âœ… æ£€æµ‹æ‰€æœ‰ç±»å‹çš„ä¸ä¸€è‡´  
âœ… å¬å›ç‡é«˜ï¼Œæ¼æ£€å°‘  
âœ… å¯¹ Baseless Info æ£€æµ‹å¥½  

### åŠ£åŠ¿
âš ï¸ å‡†ç¡®ç‡è¾ƒä½ï¼Œè¯¯æŠ¥å¤š  
âš ï¸ å¯è§£é‡Šæ€§å·®  

### ä½¿ç”¨
```bash
cd bartscore_methods
python bartscore_detector.py --gpu 0 --input ../../data/test_set.jsonl --threshold -1.8734
```

---

## ğŸ“ 2. NLI-DeBERTa æ–¹æ³•

**è·¯å¾„**: `nli_methods/`

### æ ¸å¿ƒæ€æƒ³
ä½¿ç”¨è‡ªç„¶è¯­è¨€æ¨ç†æ¨¡å‹åˆ¤æ–­åŸæ–‡å’Œç”Ÿæˆæ–‡æœ¬ä¹‹é—´çš„é€»è¾‘å…³ç³»ï¼ˆè•´å«/ä¸­ç«‹/çŸ›ç›¾ï¼‰ã€‚

### å®ç°æ–‡ä»¶
- `nli_deberta_detector.py` - NLI æ£€æµ‹å™¨ â­ æ¨è
- `nli_threshold_optimizer.py` - é˜ˆå€¼ä¼˜åŒ–å™¨

### å…³é”®æ”¹è¿›
1. **è•´å«åˆ¤å®š**: entailment < threshold â†’ å¹»è§‰
2. **å¥å­çº§æ£€æµ‹**: SpaCy åˆ†å¥ + é€å¥æ£€æµ‹
3. **æœ€å·®åˆ†æ•°**: ä½¿ç”¨æœ€å·®å¥å­çš„åˆ†æ•°
4. **é˜ˆå€¼ä¼˜åŒ–**: éªŒè¯é›†ç½‘æ ¼æœç´¢

### æ€§èƒ½ï¼ˆé¢„æœŸæµ‹è¯•é›†ï¼‰
- **F1åˆ†æ•°**: 70-80
- **å‡†ç¡®ç‡**: 65-75%
- **å¬å›ç‡**: 75-85%

### ä¼˜åŠ¿
âœ… å‡†ç¡®ç‡é«˜ï¼Œè¯¯æŠ¥å°‘  
âœ… å¯è§£é‡Šæ€§å¼º  
âœ… å¯¹ Conflict ç±»å‹æ£€æµ‹ç‰¹åˆ«å¼ºï¼ˆ90-95%ï¼‰  
âœ… SpaCy åˆ†å¥å‡†ç¡®  

### åŠ£åŠ¿
âš ï¸ å¯¹ Baseless Info æ£€æµ‹è¾ƒå¼±  
âš ï¸ å¥å­çº§æ£€æµ‹é€Ÿåº¦æ…¢  

### ä½¿ç”¨
```bash
cd nli_methods
python nli_deberta_detector.py --gpu 0 --input ../../data/test_set.jsonl --threshold 0.54 --use-entailment --sentence-level
```

---

## ğŸ†š æ–¹æ³•å¯¹æ¯”

| ç»´åº¦ | BARTScore | NLI-DeBERTa | æœ€ä½³ |
|------|-----------|-------------|------|
| **F1åˆ†æ•°** | 66-68 | **70-80** | ğŸ† NLI |
| **å‡†ç¡®ç‡** | 54-57% | **65-75%** | ğŸ† NLI |
| **å¬å›ç‡** | **84-87%** | 75-85% | ğŸ† BARTScore |
| **Conflictæ£€æµ‹** | 90% | **90-95%** | ğŸ† NLI |
| **Baselessæ£€æµ‹** | **90%** | 60-75% | ğŸ† BARTScore |
| **é€Ÿåº¦** | **å¿«** | æ…¢ | ğŸ† BARTScore |
| **å¯è§£é‡Šæ€§** | ä½ | **é«˜** | ğŸ† NLI |

### æ¨èä½¿ç”¨

**NLI-DeBERTa** (æ¨è):
- âœ… éœ€è¦é«˜å‡†ç¡®ç‡
- âœ… ä¸»è¦æ£€æµ‹çŸ›ç›¾å‹å¹»è§‰
- âœ… éœ€è¦å¯è§£é‡Šç»“æœ
- âœ… å¯ä»¥æ¥å—è¾ƒæ…¢é€Ÿåº¦

**BARTScore**:
- âœ… éœ€è¦é«˜å¬å›ç‡ï¼ˆä¸èƒ½æ¼æ£€ï¼‰
- âœ… æ··åˆç±»å‹å¹»è§‰
- âœ… éœ€è¦å¿«é€Ÿå¤„ç†
- âœ… å¯¹ Baseless Info æ£€æµ‹é‡è¦

**ç»„åˆä½¿ç”¨**:
- ä¸¤ä¸ªæ£€æµ‹å™¨éƒ½åˆ¤å®šä¸ºå¹»è§‰ â†’ é«˜ç½®ä¿¡åº¦å¹»è§‰
- ä»»ä¸€åˆ¤å®šä¸ºå¹»è§‰ â†’ éœ€è¦äººå·¥å®¡æ ¸

---

## ğŸ› ï¸ å·¥å…·æ–‡ä»¶

### æ•°æ®å‡†å¤‡
- `split_dataset.py` - åˆ†å‰²æ•°æ®ä¸ºéªŒè¯é›†å’Œæµ‹è¯•é›†

### æ–‡æ¡£
- `COMPLETE_WORKFLOW.md` - å®Œæ•´å·¥ä½œæµç¨‹
- `VALIDATION_SET_GUIDE.md` - éªŒè¯é›†ä½¿ç”¨æŒ‡å—
- `IMPROVEMENTS.md` - æ”¹è¿›è¯´æ˜

### ä½¿ç”¨æµç¨‹
```bash
# 1. åˆ†å‰²æ•°æ®ï¼ˆä¸€æ¬¡æ€§ï¼‰
python split_dataset.py

# 2. é€‰æ‹©æ–¹æ³•
cd bartscore_methods  # æˆ– cd nli_methods

# 3. éªŒè¯é›†ä¼˜åŒ–é˜ˆå€¼
python [detector].py --input ../../data/validation_set.jsonl ...
python [optimizer].py --results ...

# 4. æµ‹è¯•é›†è¯„ä¼°
python [detector].py --input ../../data/test_set.jsonl --threshold [æœ€ä¼˜å€¼] ...
```

---

## ğŸ“Š å½“å‰çŠ¶æ€

### âœ… å·²å®Œæˆ
- [x] æ•°æ®åˆ†å‰²ï¼ˆéªŒè¯é›† + æµ‹è¯•é›†ï¼‰
- [x] BARTScore éªŒè¯é›†è¿è¡Œ
- [x] BARTScore é˜ˆå€¼ä¼˜åŒ–
- [x] BARTScore æµ‹è¯•é›†è¯„ä¼°
- [x] NLI éªŒè¯é›†è¿è¡Œï¼ˆå¤šä¸ªç‰ˆæœ¬ï¼‰
- [x] NLI é˜ˆå€¼ä¼˜åŒ–

### â³ å¾…å®Œæˆ
- [ ] NLI æµ‹è¯•é›†è¯„ä¼°ï¼ˆä½¿ç”¨æœ€ä¼˜é˜ˆå€¼ï¼‰
- [ ] ç”Ÿæˆæœ€ç»ˆå¯¹æ¯”æŠ¥å‘Š

---

*é¡¹ç›®è·¯å¾„: /home/xgq/Test/detectors*  
*æœ€åæ›´æ–°: 2025-10-30*



